# 问题描述

**状态**: ✅ 已记录
**最后更新**: 2026-01-28

---

## 原始问题

用户报告提取的字体存在以下问题：

### 小号字体问题

- 路径: `/fonts_correct/small`
- 现象: 所有带 `+U` 后缀的字符都是坏字

### 大号字体问题

- 路径: `/fonts_correct/large`
- 坏字文件:
  - `0x4A_1F29.bmp`
  - `0x4A_3D95.bmp`
  - `0x4A_3CCF.bmp`
  - `0x4A_805B.bmp`
  - `0x4A_6759.bmp`

### 观察到的模式

好、坏、好、坏交替出现

---

## 验证案例

| Unicode | 位置 | 偏移 | 首字节 | 状态 | 匹配度 |
|---------|------|------|--------|------|--------|
| U+6CC4 | 831 (奇数) | 0x466B0E | 0x00 | 好 | 100% |
| U+6CC5 | 832 (偶数) | 0x466B2F | 0x90 | **坏** | N/A |
| U+6CC6 | 833 (奇数) | 0x466B50 | 0x40 | 好 | 100% |

---

## 测试样本结果

| Unicode | 首字节 | Bit 7 | 编码 | 列数 | 匹配度 | 状态 |
|---------|--------|-------|------|------|--------|------|
| U+6CC3 | 0x8F | 1 | 特殊 | 14 | 81.7% | 坏 |
| U+6CC4 | 0x00 | 0 | 标准 | 15 | **100%** | 好 ✅ |
| U+6CC5 | 0x90 | 1 | 特殊 | 14 | 88.1% | 坏 |
| U+6CC6 | 0x40 | 0 | 标准 | 15 | **100%** | 好 ✅ |
| U+6CC7 | 0x90 | 1 | 特殊 | 14 | 80.8% | 坏 |

---

## 扫描公式验证

```
scan_interval = 33
scan_start = 2 * (table_idx % 33) + 8
```

所有报告的坏字位置都完全对齐扫描公式：

| 坏字 | 偏移 | 位置计算 | 是否整数 |
|------|------|----------|----------|
| 0x1F29 | 0x1F29 | 241.00 | ✅ |
| 0x3CCF | 0x3CCF | 471.00 | ✅ |
| 0x3D95 | 0x3D95 | 477.00 | ✅ |
| 0x6759 | 0x6759 | 801.00 | ✅ |
| 0x805B | 0x805B | 995.00 | ✅ |

---

## 根本原因

**问题不是扫描公式，而是编码方式的选择**

固件使用两种不同的编码方式：
- **标准编码** (15列 × 16行): 首字节 < 0x80
- **特殊编码** (14列 × 16行): 首字节 ≥ 0x80

---

**参见**: [编码规则详解](../04_DATA_DISCOVERY/ENCODING_RULES.md)
